# 아이템 1. 생성자 대신 정적 팩터리 메서드를 고려하라.

> 클래스는 클라이언트에 public 생성자 대신 정적 팩터리 메서드를 제공할 수 있다.

## 정적 팩터리 메서드의 장점

### 1. 이름을 가질 수 있다.

- 생성자 자체와 생성자에 전달하는 매개변수만으로는 반환될 객체의 특성을 제대로 설명하기 어렵다.
- 반면 정적 팩터리 메서드는 이름을 잘 짓는 것으로 반환될 객체의 특성을 쉽게 묘사할 수 있다.

```Java
// 값이 소수인 BigInteger를 반환하는 생성자의 시그니처 예시
BigInteger(int, int, Random)

// 값이 소수인 BigInteger를 반환하는 정적 팩터리 메서드 예시
BigInteger.probablePrime
```

### 2. 불변 클래스의 인스턴스나 생성된 인스턴스를 캐싱해 재활용할 수 있다.

- 이를 통해 불필요한 객체 생성을 피할 수도 있다.

### 3. 반환 타입의 하위 타입 객체를 반환할 수 있다.

- 이를 통해 반환할 객체의 클래스를 선택할 수 있는 유연성을 지닐 수 있다.
- API를 구현할 때, 구현 클래스를 공개하지 않고도 해당 객체를 반환할 수 있다.
- 해당 정적 팩터리 메서드를 사용하는 클라이언트는 해당 객체를 인터페이스만으로 다룬다.

### 4. 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다.

- 3번 장점으로부터 이어지는 장점으로, 반환 타입의 하위 타입이기만 하면
  어떤 클래스의 객체를 반환해도 상관없다.

> OpenJDK에서는 EnumSet 클래스가 정적 팩터리 메서드만 제공하는데,
> 원소의 수에 따라 두 가지 하위 클래스 중 하나의 인스턴스를 반환.  
> 원소가 64개 이하이면 원소들을 long 변수 하나로 관리하는 RegularEnumSet의 인스턴스를,
> 65개 이상이면 원소들을 long 배열로 관리하는 JumboEnumSet의 인스턴스를 반환.

- 시사점이라고 한다면, 이를테면 어떤 릴리스의 다음 릴리스에는 다른 클래스가 추가되어 반환될 수도 있는데, 
  단지 클라이언트는 팩터리 메서드로부터 건네받는 객체가 EnumSet의 하위 클래스이기만 하면
  어느 클래스의 인스턴스인지 알 필요가 없이 EnumSet으로 사용하기만 하면 되는 것.

### 5. 정적 팩터리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다.

- 이런 유연함은 서비스 제공자 프레임워크(Service Provider Framework)를 만드는 근간이 됨

## 정적 팩터리 메서드의 단점

### 1. 정적 팩터리 메서드만 제공하는 것으로는 하위 클래스를 만들 수 없음

- 상속을 하기 위해서는 public이나 protected 생성자가 필요하기 때문.
- 이러한 제약을 상속보다 컴포지션을 사용하도록 유도하거나,
  불변 타입으로 만들도록 하기 위해 제약을 지키도록 하는 점에서 오히려 장점으로 받아들일 수도 있음.

### 2. 프로그래머가 찾기 어렵다.

- 생성자처럼 API 설명에 명확히 드러나지 않으므로, 사용자가 직접 정적 팩터리 메서드를 찾아야 한다.
- API 문서를 명확하게 작성하고,
  정적 팩터리 메서드에 흔히 사용되는 명명 방식을 따르는 것으로 문제를 완화할 수 있다.

#### 정적 팩터리 메서드에서 흔히 사용되는 명명 방식

##### 1. from

- 매개변수를 하나 받아 인스턴스를 반환하는 형태
  ```Java
  Date date = Date.from(instant);
  ```

##### 2. of

- 매개변수를 여러 개 받아 적절한 타입의 인스턴스를 반환하는 형태

```Java
Set<Rank> faceCards = EnumSet.of(JACK, QUEEN, KING);
```

##### 3. valueOf

```Java
BigInteger prime = BigInteger.valueOf(Integer.MAX_VALUE);
```

##### 4. instance, getInstance, create, newInstance

- 매개변수를 받을 경우 매개변수로 명시한 인스턴스를 반환하는 형태
- creat, newInstance의 경우 매번 새로운 인스턴스를 생성해 반환하는 것을 보장

```Java
Object newArray = Array.newInstance(classObject, arrayLength);
```

##### 5. getType, newType, type

- type: 반환할 객체의 타입
- 생성할 클래스가 아닌 다른 클래스에 팩터리 메서드를 정의할 때 사용

```Java
FileStore fileStore = Files.getFileStore(path);
List<Complaint> litany = Collections.list(legacyLitany);
```
